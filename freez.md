
<span><h2>Фиксируем пакеты в requirements.txt&nbsp;</h2>

<p>Количество пакетов в нашем проекте растет, а мы тем временем все дальше уходим от учебных кусочков скриптов в сторону настоящего&nbsp;тестового проекта, поэтому в этом шаге давайте зафиксируем все пакеты, которые мы используем. Это стандартная практика, которая позволяет быстро переключаться в свежее виртуальное окружение, а также работать нескольким людям над одним проектом, получая одинаковые результаты.</p>

<p>Откройте терминал, перейдите в директорию, в которой вы работаете с автотестами, и активируйте виртуальное окружение.</p>

<p>После чего выполните в терминале команду:</p>

<pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">pip</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">freeze</span></span> &gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">requirements</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.txt</span></span></code></pre>

<p>Эта команда сохранит все версии пакетов в специальный файл <strong>requirements.txt.</strong></p>

<p>Как их оттуда достать? Попробуйте создать новое виртуальное окружение (если нужно, вернитесь в <a href="/lesson/25969/step/3?unit=196192" rel="noopener noreferrer nofollow">модуль 1</a> за инструкциями) и активировать. После чего выполните команду:</p>

<pre><code class="hljs cmake">pip <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> -r requirements.txt</code></pre>

<p>В свежем окружении все пакеты установлены одной командой!</p></span>

# Чтобы все были счастливы нужно вот так:

*Сохранение пакетов*

**Шаги:**

- 1. Запускаем окружение, список пакетов которого нужно сохранить (/.../evironments/<EXAMPLE_ENV>/Scripts/activate.bat)
- 2. В командной строке переходим в каталог, в котором хотим хранить файл (requirements.txt)
- 3. Сохраняем список пакетов данного окружения командой:
- - pip freeze > requirements.txt

*Восстановление пакетов для нового окружения*

**Шаги**

- 1. Запускаем новое окружение, для которого нужно восстановить список пакетов
- 2. В командной строке переходим в каталог, в котором сохранили файл (requirements.txt)
- 3. Восстанавливаем список пакетов для нового окружения командой:
- - pip install -r requirements.txt

*в результате должно сгенерироваться сообщение об успешности проведенного мероприятия, где указаны ваши версии пакетов и их версий, естественно.*
>>> Successfully installed atomicwrites-1.3.0 attrs-19.3.0 colorama-0.4.1 more-itertools-7.2.0 packaging-19.2 pluggy-0.13.1 py-1.8.0 pyparsing-2.4.5 pytest-5.1.1 selenium-3.14.0 six-1.13.0 urllib3-1.25.7 wcwidth-0.1.7



*Есть мнение (и лично я с ним согласен), что в requirements.txt должны быть указаны только основные библиотеки, используемые в проекте, в нашем случае pytest и selenium, а пинить версии зависимостей фризом нужно в файле constraints.txt.*
**Тогда установка зависимостей будет выполняться командой**

>>>pip install -r requirements.txt -c constraints.txt

При таком подходе файл **requirements.txt** будет читаемым и информативным, в отличие от варианта, когда в него просто пишется вывод **pip freeze**.
